<html>
  <head>
    <title>Exiting Sewer</title>
    <script type="text/javascript">
      /**
       * Twison - Twine 2 JSON Export Story Format
       *
       * Copyright (c) 2015 Em Walker
       * https://lazerwalker.com
       *
       * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and
       * associated documentation files (the "Software"), to deal in the Software without restriction,
       * including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,
       * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so,
       * subject to the following conditions:
       *
       * The above copyright notice and this permission notice shall be included in all copies or substantial
       * portions of the Software.
       *
       * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT
       * LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
       * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
       * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
       * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
       */
      var Twison={extractLinksFromText:function(t){var n=t.match(/\[\[.+?\]\]/g);return n?n.map(function(t){var n=t.match(/\[\[(.*?)\-\&gt;(.*?)\]\]/);return n?{name:n[1],link:n[2]}:(t=t.substring(2,t.length-2),{name:t,link:t})}):null},extractPropsFromText:function(t){var n,r={},e=!1;const a=/\{\{((\s|\S)+?)\}\}((\s|\S)+?)\{\{\/\1\}\}/gm;for(;null!==(n=a.exec(t));){const o=n[1],s=n[3].replace(/(\r\n|\n|\r)/gm,""),i=this.extractPropsFromText(s);r[o]=null!==i?i:s,e=!0}return e?r:null},convertPassage:function(t){var n={text:t.innerHTML},r=Twison.extractLinksFromText(n.text);r&&(n.links=r);const e=Twison.extractPropsFromText(n.text);if(e&&(n.props=e),["name","pid","position","tags"].forEach(function(r){var e=t.attributes[r].value;e&&(n[r]=e)}),n.position){var a=n.position.split(",");n.position={x:a[0],y:a[1]}}return n.tags&&(n.tags=n.tags.split(" ")),n},convertStory:function(t){var n=t.getElementsByTagName("tw-passagedata"),r=Array.prototype.slice.call(n).map(Twison.convertPassage),e={passages:r};["name","startnode","creator","creator-version","ifid"].forEach(function(n){var r=t.attributes[n].value;r&&(e[n]=r)});var a={};return e.passages.forEach(function(t){a[t.name]=t.pid}),e.passages.forEach(function(t){t.links&&t.links.forEach(function(t){t.pid=a[t.link],t.pid||(t.broken=!0)})}),e},convert:function(){var t=document.getElementsByTagName("tw-storydata")[0],n=JSON.stringify(Twison.convertStory(t),null,2);document.getElementById("output").innerHTML=n}};window.Twison=Twison;
    </script>
  </head>
  <body>
    <pre id="output"></pre>
    <div id="storyData" style="display: none;">
      <tw-storydata name="Exiting Sewer" startnode="1" creator="Twine" creator-version="2.3.14" ifid="7D089C14-43CF-41EF-9DA8-38001AEA6106" zoom="1" format="Twison" format-version="0.0.1" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css"></style><script role="script" id="twine-user-script" type="text/twine-javascript"></script><tw-passagedata pid="1" name="Exiting Sewer" tags="" position="866,323" size="100,100">You look up to see your Ferryman guide quickly ascending the cistern ladder.  

At the top is a small hatch.  The hatch has a small aperature cut out on the left side, allowing both light and water to pour through.  

[[C-&gt;keys]]</tw-passagedata><tw-passagedata pid="2" name="I&#39;ve changed my mind, I don&#39;t want to go." tags="" position="786,577" size="100,100">That&#39;s what you want to say.  But it *isn&#39;t* what you say.  Instead you stand petrified, like a gormless gollum, and don&#39;t say a word.  

[[Why won&#39;t you let me say what I want?  Why can&#39;t I run away from all this?]]</tw-passagedata><tw-passagedata pid="3" name="p:Alright, open the hatch." tags="" position="942,577" size="100,100">The words come out of you as if directed by a puppeteer.  Except you are both the marionette and the one pulling the strings.

[[C-&gt;Open Hatch]]</tw-passagedata><tw-passagedata pid="4" name="Why won&#39;t you let me say what I want?  Why can&#39;t I run away from all this?" tags="" position="784,726" size="100,100">I&#39;m not to blame here.  *You&#39;re* the one who won&#39;t let you say what you want.  Or rather, what you&#39;ve decided you &quot;want.&quot;  The conclusions you&#39;ve drawn using more cerebral approaches don&#39;t matter.  Deep in your bones you&#39;ve decided the only way out of here is forward.  

I mean, I&#39;m not going to stop you if you decide to bail.  I *can&#39;t* stop you; I&#39;m just some voice in your head of suspicious, possibly bicameral evolutionary origin.  Run wild.  Turn around and run right back to the entrance of these tunnels.  You&#39;re pretty in shape right?

...Well?  I&#39;m waiting.

See?  You aren&#39;t going anywhere but forward.  Go ahead.  Tell the Ferryman you&#39;re ready.  You kind of left him hanging, after all.

[[This isn&#39;t fair.  I shouldn&#39;t have to do this.]]</tw-passagedata><tw-passagedata pid="5" name="This isn&#39;t fair.  I shouldn&#39;t have to do this." tags="" position="784,876" size="100,100">Fine, then.  Go die like a baby sea turtle.  That won&#39;t be fair either, but life will still pan out that way.

[[Continue-&gt;keys]] </tw-passagedata><tw-passagedata pid="6" name="Open Hatch" tags="open_hatch" position="942,727" size="100,100">Your Ferryman guide opens the hatch and climbs through.  You quickly clamber up after, pulling yourself through the portal at the top.</tw-passagedata><tw-passagedata pid="7" name="keys" tags="keys" position="863,460" size="100,100">You hear the faint sound of metal grating against metal - he&#39;s opening the lock securing the hatch at the top.  His voice reverberates as it echoes down the cylinder.

Ferryman::As soon as I open this hatch you&#39;ll need to clamber up the ladder as quickly as possible.  I won&#39;t be able to keep it open for long.  Ready?

[[I&#39;ve changed my mind, I don&#39;t want to go.]]
[[p:Alright, open the hatch.]]</tw-passagedata></tw-storydata>
    </div>
    <script>
      Twison.convert();
    </script>
  </body>
</html>
